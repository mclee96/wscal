(this.webpackJsonpwscal=this.webpackJsonpwscal||[]).push([[0],{53:function(e,t,a){},54:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n,i=a(1),s=a.n(i),c=a(17),r=a.n(c),l=(a(53),a(6)),o=a(23),d=a(24),u=a(7),h=a(35),j=a(32),b=(a(54),a(22)),f=a(45),v=a(18),p=a(29),m=a(46),O=a(9),g=a(44),x=a(43),y=a(11),k=a(47),S=a(10),w=a(37),F=a.p+"static/media/morphs.8d5cd39d.tsv",C=a.p+"static/media/esv.fe2ed14b.tsv",A=a.p+"static/media/na28.19940234.tsv",z=a.p+"static/media/vocab.830e3c37.tsv",P="Case",N="Gender",R="Number",D="Mood",T="participle",I="Part",E="adjective",M="noun",H="pronoun",L="verb",V="Person",_="Tense",W="Voice",B="Chapter",G="Gloss",J="Lemma",U="Result",q="Esv",X="Na28",K="Reference",Q=(n={},Object(l.a)(n,I,[E,M,L,H]),Object(l.a)(n,N,["feminine","masculine","neuter"]),Object(l.a)(n,P,["nominative","genitive","dative","accusative","vocative"]),Object(l.a)(n,_,["present","imperfect","future","aorist","perfect"]),Object(l.a)(n,W,["active","middle","passive"]),Object(l.a)(n,R,["singular","plural"]),Object(l.a)(n,D,["indicative","imperative","infinitive","subjunctive",T]),n),Y=a(55),Z=function(){function e(){Object(o.a)(this,e)}return Object(d.a)(e,null,[{key:"loadData",value:function(){return new Promise((function(t,a){Object.keys(localStorage).some((function(e){return e.includes("/wscal/static/media")}))&&localStorage.clear(),0===e.vocab.length?e.loadFile("vocab",z,(function(a){var n=[];Y.parse(a,{delimiter:"\t",header:!0}).data.forEach((function(e){return n.push(e)})),e.vocab=n,t(e.vocab)})):t(e.vocab),0===e.morphs.length&&e.loadFile("morphs",F,(function(t){var a=[];Y.parse(t,{delimiter:"\t",header:!0}).data.forEach((function(e){return a.push(e)})),e.morphs=a})),0===Object.keys(e.esv).length&&e.loadFile("esv",C,(function(t){Y.parse(t,{delimiter:"\t",header:!0}).data.forEach((function(t){return e.esv[t.Abbr]=t.Text}))})),0===Object.keys(e.na28).length&&e.loadFile("na28",A,(function(t){Y.parse(t,{delimiter:"\t",header:!0}).data.forEach((function(t){return e.na28[t.Abbr]=t.Text}))}))}))}},{key:"loadFile",value:function(e,t,a){if(null!=localStorage.getItem(e)&&localStorage.getItem(e+"_filepath")===t)a&&a(localStorage.getItem(e));else{localStorage.setItem(e+"_filepath",t);var n=new XMLHttpRequest;n.addEventListener("load",(function(t){localStorage.setItem(e,n.responseText.trim()),a&&a(n.responseText.trim())})),n.open("GET",t),n.send()}}},{key:"getRecords",value:function(t){return e.morphs.filter((function(e){return Object.keys(t).filter((function(e){return 0!==t[e].length})).every((function(a){return"-"===e[a]||t[a].includes(e[a])}))})).filter((function(e){return"-"!==e.Chapter})).map((function(t){var a,n=t.Reference.split(","),i=n[Math.floor(Math.random()*n.length)];return Object.assign({},t,(a={},Object(l.a)(a,K,i),Object(l.a)(a,q,e.esv[i]),Object(l.a)(a,X,e.na28[i]),a))}))}},{key:"getFlashcards",value:function(t,a){return Object.values(e.getRecords(t).map((function(e){var t;switch(e.Part){case"noun":t=[U,J,G,N,P,R,q];break;case"verb":t=e.Mood===T?[U,J,G,_,W,D,N,P,R,q]:[U,J,G,_,W,D,V,R,q];break;case"adjective":t=[U,J,G,N,P,R,q];break;case"conjunction":case"preposition, adverb":case"preposition":t=[U,J,G,q];break;case"pronoun":case"pronoun, adjective":case"adjective, pronoun":t=[U,J,G,V,N,P,R,q];break;default:t=[U]}return[e,t.filter((function(e){return a.includes(e)}))]})).reduce((function(e,t){var a=t[1].filter((function(e){return e!==q})).map((function(e){return t[0][e]})).join();return e[a]=e[a]||t,e}),{})).map((function(e){var t=e[0],a=e[1];return[t.Result,a.map((function(e){return e===G?'("'+t.Gloss+'")':e===q?"<> "+t.Reference+" "+t.Esv:t[e]})).join(" ")]}))}},{key:"getVocab",value:function(t){return t?e.vocab.filter((function(e){return t.includes(e.Chapter)})):e.vocab}}]),e}();Z.vocab=[],Z.morphs=[],Z.esv={},Z.na28={};var $=Z,ee=a(31),te=a(39),ae=a(36),ne=a(48),ie=(a(40),a(0)),se=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={display:[],selected:e.selected,parts:[]},n.criteria="",n.searchTimeout=0,n.vocab=[],n.onSelect=e.onSelect.bind(Object(u.a)(n)),n.search=n.search.bind(Object(u.a)(n)),n.addAll=n.addAll.bind(Object(u.a)(n)),n.togglePart=n.togglePart.bind(Object(u.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;$.loadData().then((function(t){e.vocab=t,e.setState({display:t})}))}},{key:"componentDidUpdate",value:function(e){e.selected!==this.props.selected&&this.setState({selected:this.props.selected})}},{key:"togglePart",value:function(e){var t=this;this.setState((function(a,n){var i=a.parts.indexOf(e),s=i>-1?a.parts.slice(0,i).concat(a.parts.slice(i+1)):Object(ee.a)(a.parts).concat([e]);return{parts:s,display:t.filter(t.criteria,s)}}))}},{key:"search",value:function(e,t){var a=this;this.criteria=e,t.preventDefault(),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((function(){return a.setState({display:a.filter(e,a.state.parts)})}),100)}},{key:"addAll",value:function(e,t){t.preventDefault(),e=e||"all";var a=this.state.parts?e+" "+this.state.parts.map((function(e){return e+"s"})).join():e;this.onSelect(a,this.filter(e,this.state.parts),"add")}},{key:"filter",value:function(e,t){var a=this,n=[];return e.trim().split(",").map((function(e){var n=e.trim();if(!n)return a.vocab;var i=e.replaceAll("ch","").split("-");if(i.every((function(e){return!isNaN(e)}))){i.length<2&&i.push(parseInt(i[0]));for(var s=[],c=parseInt(i[0]);c<parseInt(i[1])+1;c++)s=s.concat(a.vocab.filter((function(e){var a=Object.values(e).join().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return a.endsWith(","+c.toString())&&(0===t.length||t.some((function(e){return a.includes(","+e+",")})))})));return s}switch(n){case"nouns":case"nns":case"nn":n="noun";break;case"verbs":case"vbs":case"vb":n="verb";break;case"adjectives":case"adjs":case"adj":n="adjective";break;case"prepositions":case"preps":case"prep":n="preposition";break;case"conjunctions":case"conjs":case"conj":n="conjunction";break;case"adverbs":case"advbs":case"advb":case"adv":n="adverb"}return["noun","verb","adjective","preposition","conjunction","adverb"].includes(n)?a.vocab.filter((function(e){return Object.values(e).join().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(","+n.normalize("NFD")+",")})):a.vocab.filter((function(e){var a=Object.values(e).join().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return a.includes(n.normalize("NFD"))&&(0===t.length||t.some((function(e){return a.includes(","+e+",")})))}))})).forEach((function(e){return n=n.concat(e)})),n}},{key:"render",value:function(){var e=this,t=[J,B,I,G],a=[50,120,30,100,500];return Object(ie.jsx)("div",{style:{maxWidth:"19em"},children:Object(ie.jsxs)(b.a,{variant:"light",style:{textAlign:"left",borderColor:"lightgrey"},children:[Object(ie.jsx)("h5",{children:"(1) vocab"}),Object(ie.jsx)(y.a,{className:"me-1",children:Object(ie.jsx)(O.a,{children:Object(ie.jsx)(te.a,{onSubmit:function(t){return e.addAll(t.target[0].value,t)},children:Object(ie.jsxs)(ae.a,{size:"sm",children:[Object(ie.jsx)(te.a.Control,{type:"text",id:"wat","aria-label":"chapter restrictions (e.g. 2 or 2,3 or 2-4)","aria-describedby":"basic-addon1",placeholder:'e.g. "ch2-7 verbs" or "\u03c0\u03b1\u03c2"',onChange:function(t){return e.search(t.target.value,t)}}),Object(ie.jsxs)(v.a,{disabled:this.state.display.length<=0,size:"sm",type:"submit",children:["Add All (",this.state.display.length,")"]})]})})})}),Object(ie.jsx)(y.a,{children:Object(ie.jsx)(O.a,{children:Object(ie.jsx)(ae.a,{size:"sm",children:Object(ie.jsxs)(w.a,{type:"checkbox",size:"sm",children:[Object(ie.jsx)(S.a,{variant:"outline-secondary",value:"nouns",id:"nouns-filter",style:{lineHeight:1,fontSize:".75em"},onClick:function(t){return e.togglePart(M,t)},children:"n."}),Object(ie.jsx)(S.a,{variant:"outline-secondary",value:"verbs",id:"verbs-filter",style:{lineHeight:1,fontSize:".75em"},onClick:function(t){return e.togglePart(L,t)},children:"v."}),Object(ie.jsx)(S.a,{variant:"outline-secondary",value:"adjectives",id:"adjectives-filter",style:{lineHeight:1,fontSize:".75em"},onClick:function(t){return e.togglePart(E,t)},children:"adj."}),Object(ie.jsx)(S.a,{variant:"outline-secondary",value:"prepositions",id:"prepositions-filter",style:{lineHeight:1,fontSize:".75em"},onClick:function(t){return e.togglePart("preposition",t)},children:"prep."}),Object(ie.jsx)(S.a,{variant:"outline-secondary",value:"pronouns",id:"pronouns-filter",style:{lineHeight:1,fontSize:".75em"},onClick:function(t){return e.togglePart(H,t)},children:"pron."}),Object(ie.jsx)(S.a,{variant:"outline-secondary",value:"adverb",id:"adverbs-filter",style:{lineHeight:1,fontSize:".75em"},onClick:function(t){return e.togglePart("adverb",t)},children:"adv."}),Object(ie.jsx)(S.a,{variant:"outline-secondary",value:"conjunctions",id:"conjunctions-filter",style:{lineHeight:1,fontSize:".75em"},onClick:function(t){return e.togglePart("conjunction",t)},children:"conj."})]})})})}),Object(ie.jsx)(y.a,{className:"mt-3",children:Object(ie.jsx)(O.a,{children:Object(ie.jsx)(ne.a,{height:480,width:280,columnCount:5,columnWidth:function(e){return a[e]},rowCount:this.state.display.length,rowHeight:function(e){return 30},children:function(a){var n=a.columnIndex,i=a.rowIndex,s=a.style;return Object(ie.jsx)("div",{style:Object.assign({},s,{textAlign:"left"}),children:0===n?Object(ie.jsx)(S.a,{className:"ms-2",id:i,type:"checkbox",value:i,variant:"outline-primary",checked:e.state.selected.includes(e.state.display[i]),onClick:function(){return e.onSelect(e.state.display[i].Lemma,[e.state.display[i]],"toggle")},style:{lineHeight:1,fontSize:".75em",padding:".35em .65em",fontWeight:700},children:"+"}):e.state.display[i][t[n-1]]})}})})})]})})}}]),a}(s.a.Component),ce=a(42),re=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={records:[],display:[],filters:{},fields:[U,J,N,P,_,W,D,V,R,G,I,B],limit:10,flashcardFields:[U,J,N,P,R,G,_,W,D,V,q],flashcards:[],flashcardsPreview:[],showVocab:!0,selected:{}},n.vocab=[],n.toggleFilter=n.toggleFilter.bind(Object(u.a)(n)),n.updateFields=n.updateFields.bind(Object(u.a)(n)),n.updateFlashcardFields=n.updateFlashcardFields.bind(Object(u.a)(n)),n.updateRecords=n.updateRecords.bind(Object(u.a)(n)),n.toggleSelect=n.toggleSelect.bind(Object(u.a)(n)),n.downloadRecords=n.downloadRecords.bind(Object(u.a)(n)),n.getSelected=n.getSelected.bind(Object(u.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;$.loadData().then((function(t){e.vocab=t}))}},{key:"toggleFilter",value:function(e,t){this.setState((function(a,n){var i=a.filters[e]||[],s=i.slice();return i.includes(t)?s.splice(s.indexOf(t),1):s.push(t),{filters:Object.assign({},a.filters,Object(l.a)({},e,s))}}))}},{key:"toggleSelect",value:function(e,t,a){if("toggle"===a&&(a=Object.keys(this.state.selected).some((function(t){return t===e}))?"remove":"add"),"add"===a&&this.setState((function(a,n){return{selected:Object.assign({},a.selected,Object(l.a)({},e,t))}})),"remove"===a){var n=Object.assign({},this.state.selected);delete n[e],this.setState((function(e,t){return{selected:n}}))}}},{key:"updateFields",value:function(e){this.setState((function(t,a){var n=(t.fields||[]).slice();return n.includes(e)?n.splice(n.indexOf(e),1):n.push(e),{fields:n}}))}},{key:"updateFlashcardFields",value:function(e){this.setState((function(t,a){var n=(t.flashcardFields||[]).slice();return n.includes(e)?n.splice(n.indexOf(e),1):n.push(e),{flashcardFields:n}}))}},{key:"updateRecords",value:function(){var e=Object.assign({},this.state.filters),t=[];Object.values(this.state.selected).forEach((function(e){return t=t.concat(e)})),e.Lemma=t.map((function(e){return e.Lemma}));var a=$.getRecords(e),n=$.getFlashcards(e,this.state.flashcardFields),i=Math.floor(Math.random()*a.length-this.state.limit),s=n.length>this.state.limit?Math.floor(Math.random()*(n.length-this.state.limit)):0;this.setState({records:a,display:a.slice(i,i+this.state.limit),flashcards:n,flashcardsPreview:n.slice(s,s+this.state.limit)})}},{key:"downloadRecords",value:function(){var e=this.state.flashcards.map((function(e){return e[0]+"\t"+e[1]})).join("\n"),t=new Blob([e],{type:"text/plain;charset=utf-8"}),a=(new Date).toLocaleString("en-US",{hour12:!1}).replaceAll("/",".").replaceAll(":","\u2236").replace(", ","_")+"_flashcards_";null!==this.state.selected&&(a+=Object.keys(this.state.selected).join()),Object.values(this.state.filters).some((function(e){return e.length>0}))&&(a+="_",a+=Object.values(this.state.filters).map((function(e){return e.join(",")})).join("_")),a.length>100&&(a=a.substr(0,100)+"...(full name cut off)"),a+=".tsv",Object(ce.saveAs)(t,a)}},{key:"getSelected",value:function(){var e=[];return Object.values(this.state.selected).forEach((function(t){return e=e.concat(t)})),e}},{key:"render",value:function(){var e=this;return Object(ie.jsxs)("div",{className:"App",children:[Object(ie.jsx)("header",{className:"App-header",children:Object(ie.jsx)("p",{})}),Object(ie.jsxs)(x.a,{fluid:!0,children:[Object(ie.jsx)(y.a,{children:Object(ie.jsx)(O.a,{sm:"auto",md:"auto",lg:"auto",xl:"auto",xxl:"auto",children:Object(ie.jsx)(S.a,{id:"show-vocab",value:"show-vocab",type:"checkbox",variant:"outline-primary",size:"sm",checked:this.state.showVocab,onClick:function(){return e.setState({showVocab:!e.state.showVocab})},children:">"})})}),Object(ie.jsxs)(y.a,{className:"mt-3",children:[Object(ie.jsx)(O.a,{sm:"auto",md:"auto",lg:"auto",xl:"auto",xxl:"auto",className:"pe-0",children:Object(ie.jsx)(g.a,{in:this.state.showVocab,dimension:"width",children:Object(ie.jsx)("div",{children:Object(ie.jsx)(se,{selected:this.getSelected(),onSelect:this.toggleSelect})})})}),Object(ie.jsxs)(O.a,{className:"ps-0",children:[Object(ie.jsxs)(b.a,{variant:"success",style:{textAlign:"left"},children:[Object(ie.jsxs)(y.a,{children:[Object(ie.jsx)("h5",{children:"(1) I want to study..."}),Object(ie.jsx)(y.a,{children:Object(ie.jsx)(O.a,{children:Object.keys(this.state.selected).map((function(t){return Object(ie.jsx)(f.a,{pill:!0,className:"me-1",bg:"primary",as:"button",style:{borderWidth:"thin"},onClick:function(){return e.toggleSelect(t,[],"remove")},children:t},t)}))})})]}),Object(ie.jsxs)(y.a,{style:{marginTop:"1rem"},children:[Object(ie.jsx)("h5",{children:"(2) ...with filters..."}),Object(ie.jsx)(m.a,{style:{justifyContent:"space-between"},children:Object.keys(Q).filter((function(e){return e!==I})).map((function(t){return Object(ie.jsx)(w.a,{id:t,type:"checkbox",size:"sm",children:Q[t].map((function(a){return Object(ie.jsx)(S.a,{id:a,value:a,variant:"outline-success",onClick:function(n){return e.toggleFilter(t,a,n)},children:a},a)}))},t)}))})]})]}),Object(ie.jsxs)(b.a,{variant:"danger",style:{textAlign:"left"},children:[Object(ie.jsx)("h5",{children:"(3) ...adjust flashcard fields..."}),Object(ie.jsx)(y.a,{children:Object(ie.jsx)(p.a,{defaultValue:this.state.flashcardFields,size:"sm",children:a.flashcardFields.map((function(t){return Object(ie.jsx)(v.a,{id:t,value:t,active:e.state.flashcardFields.includes(t),variant:"outline-secondary",onClick:function(a){return e.updateFlashcardFields(t,a)},children:t},t)}))})})]}),Object(ie.jsxs)(b.a,{variant:"info",style:{textAlign:"left"},children:[Object(ie.jsxs)(y.a,{children:[Object(ie.jsx)(O.a,{children:Object(ie.jsx)("h5",{children:"(4) ...preview!"})}),Object(ie.jsx)(O.a,{style:{textAlign:"right"},children:Object(ie.jsx)(v.a,{onClick:this.updateRecords,variant:"primary",children:"Refresh!"})})]}),Object(ie.jsx)(y.a,{children:Object(ie.jsxs)(k.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(ie.jsx)("thead",{children:Object(ie.jsxs)("tr",{children:[Object(ie.jsx)("th",{style:{whiteSpace:"nowrap"},children:"Front"},"front"),Object(ie.jsx)("th",{style:{whiteSpace:"nowrap"},children:"Back"},"back")]})}),Object(ie.jsx)("tbody",{children:this.state.flashcardsPreview.map((function(e){return Object(ie.jsxs)("tr",{children:[Object(ie.jsx)("td",{style:{whiteSpace:"nowrap"},children:e[0]},"front"),Object(ie.jsx)("td",{style:{whiteSpace:"nowrap"},children:e[1]},"back")]},"tr-"+e[0]+e[1])}))})]})})]}),Object(ie.jsxs)(b.a,{variant:"secondary",style:{textAlign:"left"},children:[Object(ie.jsx)("h5",{children:"(5) Download flashcards"}),Object(ie.jsx)(y.a,{children:Object(ie.jsx)(O.a,{children:Object(ie.jsxs)(v.a,{onClick:this.downloadRecords,children:["Download Set (",this.state.flashcards.length," flashcards)"]})})})]})]})]})]})]})}}]),a}(s.a.Component);re.fields=[U,J,N,P,_,W,D,V,R,G,I,B,"Adverb/particle Type",K,q,X],re.flashcardFields=[U,J,N,P,R,G,_,W,D,V,q];var le=re,oe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,62)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),i(e),s(e),c(e)}))};r.a.render(Object(ie.jsx)(s.a.StrictMode,{children:Object(ie.jsx)(le,{})}),document.getElementById("root")),oe()}},[[60,1,2]]]);
//# sourceMappingURL=main.319bf81b.chunk.js.map